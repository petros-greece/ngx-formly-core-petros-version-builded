!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("@ngx-formly/core",["exports","@angular/core","@angular/forms","rxjs","rxjs/operators","@angular/common","@angular/platform-browser"],t):t(((e=e||self)["ngx-formly"]=e["ngx-formly"]||{},e["ngx-formly"].core={}),e.ng.core,e.ng.forms,e.rxjs,e.rxjs.operators,e.ng.common,e.ng.platformBrowser)}(this,(function(e,t,n,r,o,i,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function l(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function f(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function p(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,r){t(n,r,e)}}function d(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}Object.create;function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}Object.create;function g(e,t,n){if(t.id)return t.id;var r=t.type;return!r&&t.template&&(r="template"),[e,r,t.key,n].join("_")}function v(e){if(!e.key)return[];if(!e._keyPath||e._keyPath.key!==e.key){var t=-1===e.key.indexOf("[")?e.key:e.key.replace(/\[(\w+)\]/g,".$1");V(e,"_keyPath",{key:e.key,path:-1!==t.indexOf(".")?t.split("."):[t]})}return e._keyPath.path.slice(0)}var b=["required","pattern","minLength","maxLength","min","max"];function C(e,t,n){void 0===n&&(n=!1);for(var r=v(e);e.parent;)r=y(v(e=e.parent),r);if(n&&void 0===t&&e.autoClear&&!e.formControl.parent){var o=r.pop();delete r.reduce((function(e,t){return e[t]||{}}),e.parent.model)[o]}else!function(e,t,n){for(var r=0;r<t.length-1;r++){var o=t[r];e[o]&&P(e[o])||(e[o]=/^\d+$/.test(t[r+1])?[]:{}),e=e[o]}e[t[t.length-1]]=w(n)}(e.model,r,t)}function O(e){var t,n,r=e.parent?e.parent.model:e.model;try{for(var o=h(v(e)),i=o.next();!i.done;i=o.next()){var s=i.value;if(!r)return r;r=r[s]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}function E(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach((function(t){for(var n in t)x(e[n])||_(e[n])?e[n]=w(t[n]):j(e[n],t[n])&&E(e[n],t[n])})),e}function x(e){return null==e}function F(e){return void 0===e}function _(e){return""===e}function k(e){return"function"==typeof e}function j(e,t){return P(e)&&P(t)&&Object.getPrototypeOf(e)===Object.getPrototypeOf(t)&&!(Array.isArray(e)||Array.isArray(t))}function P(e){return null!=e&&"object"==typeof e}function w(e){if(!P(e)||r.isObservable(e)||e.changingThisBreaksApplicationSecurity||-1!==["RegExp","FileList","File","Blob"].indexOf(e.constructor.name))return e;if(e._isAMomentObject&&k(e.clone))return e.clone();if(e instanceof n.AbstractControl)return null;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e))return e.slice(0).map((function(e){return w(e)}));var t=Object.getPrototypeOf(e),o=Object.create(t);return o=Object.setPrototypeOf(o,t),Object.keys(e).reduce((function(t,n){var r=Object.getOwnPropertyDescriptor(e,n);return r.get?Object.defineProperty(t,n,r):t[n]=w(e[n]),t}),o)}function V(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0}),e[t]=n}function R(e){var t=e.source,n=e.paths,r=e.target,o=e.setFn,i=[];return 0===n.length&&(r=t),Object.keys(r).forEach((function(e){var r=function(){},s=A(t,y(n,[e]),(function(s){var a=s.firstChange,l=s.currentValue;!a&&o(),r();var u=i.indexOf(r);u>-1&&i.splice(u,1),P(l)&&"Object"===l.constructor.name&&(r=R({source:t,setFn:o,paths:y(n,[e]),target:l}),i.push(r))}));i.push((function(){return s.unsubscribe()}))})),function(){i.forEach((function(e){return e()}))}}function A(e,t,n){e._observers||V(e,"_observers",{});for(var r=e,o=0;o<t.length-1;o++)r[t[o]]&&P(r[t[o]])||(r[t[o]]=/^\d+$/.test(t[o+1])?[]:{}),r=r[t[o]];var i=t[t.length-1],s=t.join(".");e._observers[s]||(e._observers[s]={value:r[i],onChange:[]});var a=e._observers[s];if(-1===a.onChange.indexOf(n)&&(a.onChange.push(n),n({currentValue:a.value,firstChange:!0}),1===a.onChange.length)){var l=(Object.getOwnPropertyDescriptor(r,i)||{enumerable:!0}).enumerable;Object.defineProperty(r,i,{enumerable:l,configurable:!0,get:function(){return a.value},set:function(e){if(e!==a.value){var t=a.value;a.value=e,a.onChange.forEach((function(n){return n({previousValue:t,currentValue:e,firstChange:!1})}))}}})}return{setValue:function(e){a.value=e},unsubscribe:function(){a.onChange=a.onChange.filter((function(e){return e!==n}))}}}function G(e,t){var n=e._updateTreeValidity.bind(e),r=null;e._updateTreeValidity=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r=e},t(),r&&n(r),e._updateTreeValidity=n}var D=new t.InjectionToken("FORMLY_CONFIG"),I=function(){function e(){this.types={},this.validators={},this.wrappers={},this.messages={},this.extras={checkExpressionOn:"changeDetectionCheck",showError:function(e){return e.formControl&&e.formControl.invalid&&(e.formControl.touched||e.options.parentForm&&e.options.parentForm.submitted||!(!e.field.validation||!e.field.validation.show))}},this.extensions={}}return e.prototype.addConfig=function(e){var t=this;e.types&&e.types.forEach((function(e){return t.setType(e)})),e.validators&&e.validators.forEach((function(e){return t.setValidator(e)})),e.wrappers&&e.wrappers.forEach((function(e){return t.setWrapper(e)})),e.validationMessages&&e.validationMessages.forEach((function(e){return t.addValidatorMessage(e.name,e.message)})),e.extensions&&e.extensions.forEach((function(e){return t.extensions[e.name]=e.extension})),e.extras&&(this.extras=u(u({},this.extras),e.extras))},e.prototype.setType=function(e){var t=this;Array.isArray(e)?e.forEach((function(e){return t.setType(e)})):(this.types[e.name]||(this.types[e.name]={name:e.name}),["component","extends","defaultOptions"].forEach((function(n){e.hasOwnProperty(n)&&(t.types[e.name][n]=e[n])})),e.wrappers&&e.wrappers.forEach((function(n){return t.setTypeWrapper(e.name,n)})))},e.prototype.getType=function(e){if(!this.types[e])throw new Error('[Formly Error] The type "'+e+'" could not be found. Please make sure that is registered through the FormlyModule declaration.');return this.mergeExtendedType(e),this.types[e]},e.prototype.getMergedField=function(e){var t=this;void 0===e&&(e={});var n=this.getType(e.type);n.defaultOptions&&E(e,n.defaultOptions);var r=n.extends&&this.getType(n.extends).defaultOptions;r&&E(e,r),e&&e.optionsTypes&&e.optionsTypes.forEach((function(n){var r=t.getType(n).defaultOptions;r&&E(e,r)}));var o=this.resolveFieldTypeRef(e);o&&o.instance&&o.instance.defaultOptions&&E(e,o.instance.defaultOptions),!e.wrappers&&n.wrappers&&(e.wrappers=y(n.wrappers))},e.prototype.resolveFieldTypeRef=function(e){if(void 0===e&&(e={}),!e.type)return null;var t=this.getType(e.type);if(!t.component||t._componentRef)return t._componentRef;var n=e.options,r=n._resolver,o=n._injector;return r&&o?(V(t,"_componentRef",r.resolveComponentFactory(t.component).create(o)),t._componentRef):null},e.prototype.setWrapper=function(e){var t=this;this.wrappers[e.name]=e,e.types&&e.types.forEach((function(n){t.setTypeWrapper(n,e.name)}))},e.prototype.getWrapper=function(e){if(!this.wrappers[e])throw new Error('[Formly Error] The wrapper "'+e+'" could not be found. Please make sure that is registered through the FormlyModule declaration.');return this.wrappers[e]},e.prototype.setTypeWrapper=function(e,t){this.types[e]||(this.types[e]={}),this.types[e].wrappers||(this.types[e].wrappers=[]),-1===this.types[e].wrappers.indexOf(t)&&this.types[e].wrappers.push(t)},e.prototype.setValidator=function(e){this.validators[e.name]=e},e.prototype.getValidator=function(e){if(!this.validators[e])throw new Error('[Formly Error] The validator "'+e+'" could not be found. Please make sure that is registered through the FormlyModule declaration.');return this.validators[e]},e.prototype.addValidatorMessage=function(e,t){this.messages[e]=t},e.prototype.getValidatorMessage=function(e){return this.messages[e]},e.prototype.mergeExtendedType=function(e){if(this.types[e].extends){var t=this.getType(this.types[e].extends);this.types[e].component||(this.types[e].component=t.component),this.types[e].wrappers||(this.types[e].wrappers=t.wrappers)}},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e=p([t.Injectable({providedIn:"root"})],e)}(),S=function(){function e(e,t,n,r){this.config=e,this.resolver=t,this.injector=n,this.parentForm=r}return e.prototype.buildForm=function(e,t,n,r){void 0===t&&(t=[]),this.build({fieldGroup:t,model:n,form:e,options:r})},e.prototype.build=function(e){var t=this;if(!this.config.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");if(e.parent)this._build(e);else{this._setOptions(e),G(e.form,(function(){return t._build(e)}));var n=e.options;n.checkExpressions&&n.checkExpressions(e,!0),n.detectChanges&&n.detectChanges(e)}},e.prototype._build=function(e){var t=this;e&&(this.getExtensions().forEach((function(t){return t.prePopulate&&t.prePopulate(e)})),this.getExtensions().forEach((function(t){return t.onPopulate&&t.onPopulate(e)})),e.fieldGroup&&e.fieldGroup.forEach((function(e){return t._build(e)})),this.getExtensions().forEach((function(t){return t.postPopulate&&t.postPopulate(e)})))},e.prototype.getExtensions=function(){var e=this;return Object.keys(this.config.extensions).map((function(t){return e.config.extensions[t]}))},e.prototype._setOptions=function(e){var t=this;e.form=e.form||new n.FormGroup({}),e.model=e.model||{},e.options=e.options||{};var r=e.options;r._resolver||V(r,"_resolver",this.resolver),r._injector||V(r,"_injector",this.injector),r.build||(r._buildForm=function(){console.warn("Formly: 'options._buildForm' is deprecated since v6.0, use 'options.build' instead."),t.build(e)},r.build=function(e){return t.build(e)}),!r.parentForm&&this.parentForm&&(V(r,"parentForm",this.parentForm),A(r,["parentForm","submitted"],(function(t){t.firstChange||(r.checkExpressions(e),r.detectChanges(e))})))},e.ctorParameters=function(){return[{type:I},{type:t.ComponentFactoryResolver},{type:t.Injector},{type:n.FormGroupDirective,decorators:[{type:t.Optional}]}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(I),t.ɵɵinject(t.ComponentFactoryResolver),t.ɵɵinject(t.INJECTOR),t.ɵɵinject(n.FormGroupDirective,8))},token:e,providedIn:"root"}),e=p([t.Injectable({providedIn:"root"}),c(3,t.Optional()),d("design:paramtypes",[I,t.ComponentFactoryResolver,t.Injector,n.FormGroupDirective])],e)}(),T=function(){function e(e,n,r){this.builder=e,this.config=n,this.ngZone=r,this.modelChange=new t.EventEmitter,this.field={},this._modelChangeValue={},this.valueChangesUnsubscribe=function(){}}return Object.defineProperty(e.prototype,"form",{get:function(){return this.field.form},set:function(e){this.field.form=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return this.field.model},set:function(e){this.setField({model:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fields",{get:function(){return this.field.fieldGroup},set:function(e){this.setField({fieldGroup:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.field.options},set:function(e){this.setField({options:e})},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){"changeDetectionCheck"===this.config.extras.checkExpressionOn&&this.checkExpressionChange()},e.prototype.ngOnChanges=function(e){(e.fields||e.form||e.model&&this._modelChangeValue!==e.model.currentValue)&&(this.valueChangesUnsubscribe(),this.builder.build(this.field),this.valueChangesUnsubscribe=this.valueChanges())},e.prototype.ngOnDestroy=function(){this.valueChangesUnsubscribe()},e.prototype.checkExpressionChange=function(){this.field.options.checkExpressions(this.field)},e.prototype.valueChanges=function(){var e=this;this.valueChangesUnsubscribe();var t=this.field.options.fieldChanges.pipe(o.filter((function(e){return"valueChanges"===e.type})),o.switchMap((function(){return e.ngZone.onStable.asObservable().pipe(o.take(1))}))).subscribe((function(){return e.ngZone.runGuarded((function(){e.checkExpressionChange(),e.modelChange.emit(e._modelChangeValue=w(e.model))}))}));return function(){return t.unsubscribe()}},e.prototype.setField=function(e){this.field=u(u({},this.field),this.config.extras.immutable?w(e):e)},e.ctorParameters=function(){return[{type:S},{type:I},{type:t.NgZone}]},p([t.Input(),d("design:type",Object),d("design:paramtypes",[Object])],e.prototype,"form",null),p([t.Input(),d("design:type",Object),d("design:paramtypes",[Object])],e.prototype,"model",null),p([t.Input(),d("design:type",Array),d("design:paramtypes",[Array])],e.prototype,"fields",null),p([t.Input(),d("design:type",Object),d("design:paramtypes",[Object])],e.prototype,"options",null),p([t.Output(),d("design:type",Object)],e.prototype,"modelChange",void 0),e=p([t.Component({selector:"formly-form",template:' <formly-field *ngFor="let f of fields" [field]="f"></formly-field> ',providers:[S],changeDetection:t.ChangeDetectionStrategy.OnPush}),d("design:paramtypes",[S,I,t.NgZone])],e)}(),M=function(){function e(e,t,n,r){this.config=e,this.renderer=t,this.resolver=n,this.elementRef=r,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.valueChangesUnsubscribe=function(){}}return e.prototype.ngAfterContentInit=function(){this.triggerHook("afterContentInit")},e.prototype.ngAfterViewInit=function(){this.triggerHook("afterViewInit")},e.prototype.ngOnInit=function(){this.triggerHook("onInit")},e.prototype.ngOnChanges=function(e){this.triggerHook("onChanges",e)},e.prototype.ngOnDestroy=function(){this.resetRefs(this.field),this.hostObservers.forEach((function(e){return e.unsubscribe()})),this.hooksObservers.forEach((function(e){return e()})),this.valueChangesUnsubscribe(),this.triggerHook("onDestroy")},e.prototype.renderField=function(e,t,n){var r=this;if(this.containerRef===e&&(this.resetRefs(this.field),this.containerRef.clear()),n&&n.length>0){var o=m(n),i=o[0],s=o.slice(1),a=this.config.getWrapper(i).component,l=e.createComponent(this.resolver.resolveComponentFactory(a));this.attachComponentRef(l,t),A(l.instance,["fieldComponent"],(function(e){var n=e.currentValue,o=e.previousValue,i=e.firstChange;if(n){var a=o?o.detach():null;a&&!a.destroyed?n.insert(a):r.renderField(n,t,s),!i&&l.changeDetectorRef.detectChanges()}}))}else if(t&&t.type){a=this.config.getType(t.type).component;var u=e.createComponent(this.resolver.resolveComponentFactory(a));this.attachComponentRef(u,t)}},e.prototype.triggerHook=function(e,t){if(("onInit"===e||"onChanges"===e&&t.field&&!t.field.firstChange)&&(this.valueChangesUnsubscribe=this.fieldChanges(this.field)),this.field&&this.field.hooks&&this.field.hooks[e]&&(!t||t.field)){var n=this.field.hooks[e](this.field);if(r.isObservable(n)&&-1!==["onInit","afterContentInit","afterViewInit"].indexOf(e)){var o=n.subscribe();this.hooksObservers.push((function(){return o.unsubscribe()}))}}"onChanges"===e&&t.field&&(this.renderHostBinding(),this.resetRefs(t.field.previousValue),this.renderField(this.containerRef,this.field,this.field?this.field.wrappers:[]))},e.prototype.attachComponentRef=function(e,t){this.componentRefs.push(e),t._componentRefs.push(e),Object.assign(e.instance,{field:t})},e.prototype.renderHostBinding=function(){var e=this;this.field&&(this.hostObservers.forEach((function(e){return e.unsubscribe()})),this.hostObservers=[A(this.field,["hide"],(function(t){var n=t.firstChange,r=t.currentValue;(!n||n&&r)&&e.renderer.setStyle(e.elementRef.nativeElement,"display",r?"none":"")})),A(this.field,["className"],(function(t){var n=t.firstChange,r=t.currentValue;(!n||n&&r)&&e.renderer.setAttribute(e.elementRef.nativeElement,"class",r)}))])},e.prototype.resetRefs=function(e){var t=this;e&&(e._componentRefs?e._componentRefs=e._componentRefs.filter((function(e){return-1===t.componentRefs.indexOf(e)})):V(this.field,"_componentRefs",[])),this.componentRefs=[]},e.prototype.fieldChanges=function(e){var t,r;if(this.valueChangesUnsubscribe(),!e)return function(){};var i=[R({source:e,target:e.templateOptions,paths:["templateOptions"],setFn:function(){return e.options.detectChanges(e)}}),R({source:e,target:e.options.formState,paths:["options","formState"],setFn:function(){return e.options.detectChanges(e)}})],s=function(t){var n=A(e,t,(function(t){return!t.firstChange&&e.options.detectChanges(e)}));i.push((function(){return n.unsubscribe()}))};try{for(var a=h([["template"],["fieldGroupClassName"],["validation","show"]]),l=a.next();!l.done;l=a.next()){s(l.value)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}if(e.key&&!e.fieldGroup){var u=e.formControl,f=u.valueChanges.pipe(o.distinctUntilChanged());u.value!==O(e)&&(f=f.pipe(o.startWith(u.value)));var p=e.modelOptions,c=p.updateOn,d=p.debounce;(!c||"change"===c)&&d&&d.default>0&&(f=u.valueChanges.pipe(o.debounceTime(d.default)));var m=f.subscribe((function(t){u instanceof n.FormControl&&u._fields&&u._fields.length>1&&u.patchValue(t,{emitEvent:!1,onlySelf:!0}),e.parsers&&e.parsers.length>0&&e.parsers.forEach((function(e){return t=e(t)})),C(e,t,!0),e.options.fieldChanges.next({value:t,field:e,type:"valueChanges"})}));i.push((function(){return m.unsubscribe()}))}return function(){return i.forEach((function(e){return e()}))}},e.ctorParameters=function(){return[{type:I},{type:t.Renderer2},{type:t.ComponentFactoryResolver},{type:t.ElementRef}]},p([t.Input(),d("design:type",Object)],e.prototype,"field",void 0),p([t.ViewChild("container",{read:t.ViewContainerRef,static:!0}),d("design:type",t.ViewContainerRef)],e.prototype,"containerRef",void 0),e=p([t.Component({selector:"formly-field",template:"<ng-template #container></ng-template>",changeDetection:t.ChangeDetectionStrategy.OnPush}),d("design:paramtypes",[I,t.Renderer2,t.ComponentFactoryResolver,t.ElementRef])],e)}(),H=function(){function e(e,t,n){this.renderer=e,this.elementRef=t,this.uiAttributesCache={},this.uiAttributes=y(b,["tabindex","placeholder","readonly","disabled","step"]),this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","change"]},this.document=n}return Object.defineProperty(e.prototype,"to",{get:function(){return this.field.templateOptions||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldAttrElements",{get:function(){return this.field&&this.field._elementRefs||[]},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){var t=this;e.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach((function(e){return e()})),this.uiEvents.events.forEach((function(e){var n=t.to&&t.to[e];"change"===e&&(n=t.onChange.bind(t)),n&&t.uiEvents.listeners.push(t.renderer.listen(t.elementRef.nativeElement,e,(function(e){return n(t.field,e)})))})),this.to&&this.to.attributes&&A(this.field,["templateOptions","attributes"],(function(e){var n=e.currentValue,r=e.previousValue;r&&Object.keys(r).forEach((function(e){return t.removeAttribute(e)})),n&&Object.keys(n).forEach((function(e){return t.setAttribute(e,n[e])}))})),this.detachElementRef(e.field.previousValue),this.attachElementRef(e.field.currentValue),1===this.fieldAttrElements.length&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),this.focusObserver=A(this.field,["focus"],(function(e){var n=e.currentValue;t.toggleFocus(n)})))),e.id&&this.setAttribute("id",this.id)},e.prototype.ngDoCheck=function(){var e=this;this.uiAttributes.forEach((function(t){var n=e.to[t];e.uiAttributesCache[t]!==n&&(e.uiAttributesCache[t]=n,n||0===n?e.setAttribute(t,!0===n?t:""+n):e.removeAttribute(t))}))},e.prototype.ngOnDestroy=function(){this.uiEvents.listeners.forEach((function(e){return e()})),this.detachElementRef(this.field),this.focusObserver&&this.focusObserver.unsubscribe()},e.prototype.toggleFocus=function(e){var t=this,n=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(n&&n.nativeElement.focus){var r=!!this.document.activeElement&&this.fieldAttrElements.some((function(e){var n=e.nativeElement;return t.document.activeElement===n||n.contains(t.document.activeElement)}));e&&!r?n.nativeElement.focus():!e&&r&&n.nativeElement.blur()}},e.prototype.onFocus=function(e){this.focusObserver&&this.focusObserver.setValue(!0),this.to.focus&&this.to.focus(this.field,e)},e.prototype.onBlur=function(e){this.focusObserver&&this.focusObserver.setValue(!1),this.to.blur&&this.to.blur(this.field,e)},e.prototype.onChange=function(e){this.to.change&&this.to.change(this.field,e),this.field.formControl&&this.field.formControl.markAsDirty()},e.prototype.attachElementRef=function(e){e&&(e._elementRefs&&-1===e._elementRefs.indexOf(this.elementRef)?e._elementRefs.push(this.elementRef):V(e,"_elementRefs",[this.elementRef]))},e.prototype.detachElementRef=function(e){var t=e&&e._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;-1!==t&&this.field._elementRefs.splice(t,1)},e.prototype.setAttribute=function(e,t){this.renderer.setAttribute(this.elementRef.nativeElement,e,t)},e.prototype.removeAttribute=function(e){this.renderer.removeAttribute(this.elementRef.nativeElement,e)},e.ctorParameters=function(){return[{type:t.Renderer2},{type:t.ElementRef},{type:void 0,decorators:[{type:t.Inject,args:[i.DOCUMENT]}]}]},p([t.Input("formlyAttributes"),d("design:type",Object)],e.prototype,"field",void 0),p([t.Input(),d("design:type",String)],e.prototype,"id",void 0),e=p([t.Directive({selector:"[formlyAttributes]",host:{"(focus)":"onFocus($event)","(blur)":"onBlur($event)"}}),c(2,t.Inject(i.DOCUMENT)),d("design:paramtypes",[t.Renderer2,t.ElementRef,Object])],e)}(),N=function(){function e(){}return Object.defineProperty(e.prototype,"model",{get:function(){return this.field.model},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"form",{get:function(){return this.field.form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.field.options},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.field.key},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formControl",{get:function(){return this.field.formControl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return this.field.templateOptions||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showError",{get:function(){return this.options.showError(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.field.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formState",{get:function(){return this.options.formState||{}},enumerable:!0,configurable:!0}),p([t.Input(),d("design:type",Object)],e.prototype,"field",void 0),e=p([t.Directive()],e)}(),U=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n=p([t.Component({selector:"formly-group",template:'\n    <formly-field *ngFor="let f of field.fieldGroup" [field]="f"></formly-field>\n    <ng-content></ng-content>\n  ',host:{"[class]":'field.fieldGroupClassName || ""'},changeDetection:t.ChangeDetectionStrategy.OnPush})],n)}(N),W=function(){function e(e){this.config=e}return e.prototype.ngOnChanges=function(){var e=this;this.errorMessage$=this.field.formControl.statusChanges.pipe(o.startWith(null),o.switchMap((function(){return r.isObservable(e.errorMessage)?e.errorMessage:r.of(e.errorMessage)})))},Object.defineProperty(e.prototype,"errorMessage",{get:function(){var e=this.field.formControl;for(var t in e.errors)if(e.errors.hasOwnProperty(t)){var n=this.config.getValidatorMessage(t);if(P(e.errors[t])){if(e.errors[t].errorPath)return;e.errors[t].message&&(n=e.errors[t].message)}return this.field.validation&&this.field.validation.messages&&this.field.validation.messages[t]&&(n=this.field.validation.messages[t]),this.field.validators&&this.field.validators[t]&&this.field.validators[t].message&&(n=this.field.validators[t].message),this.field.asyncValidators&&this.field.asyncValidators[t]&&this.field.asyncValidators[t].message&&(n=this.field.asyncValidators[t].message),"function"==typeof n?n(e.errors[t],this.field):n}},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:I}]},p([t.Input(),d("design:type",Object)],e.prototype,"field",void 0),e=p([t.Component({selector:"formly-validation-message",template:"{{ errorMessage$ | async }}",changeDetection:t.ChangeDetectionStrategy.OnPush}),d("design:paramtypes",[I])],e)}();function q(e,t){void 0===t&&(t=!1);var r=e.formControl.parent;if(r){var o=e.formControl,i={emitEvent:t};if(r instanceof n.FormArray){var s=r.controls.findIndex((function(e){return e===o}));-1!==s&&$(r,i,(function(){return r.removeAt(s)}))}else if(r instanceof n.FormGroup){var a=v(e),l=a[a.length-1];r.get([l])===o&&$(r,i,(function(){return r.removeControl(l)}))}o.setParent(null),e.autoClear&&(e.parent.model&&delete e.parent.model[e.key],o.reset({value:void 0,disabled:o.disabled},{emitEvent:!e.fieldGroup&&t,onlySelf:!0}))}}function L(e,t,r){if(void 0===r&&(r=!1),(t=t||e.formControl)._fields||V(t,"_fields",[]),-1===t._fields.indexOf(e)&&t._fields.push(e),!e.formControl&&t){V(e,"formControl",t),e.templateOptions.disabled=!!e.templateOptions.disabled;var o=A(e,["templateOptions","disabled"],(function(t){var n=t.firstChange,r=t.currentValue;n||(r?e.formControl.disable():e.formControl.enable())}));t.registerOnDisabledChange&&t.registerOnDisabledChange(o.setValue)}if(e.form){var i=e.form,s=v(e);i._formlyControls||V(i,"_formlyControls",{}),i._formlyControls[s.join(".")]=t;for(var a=0;a<s.length-1;a++){var l=s[a];i.get([l])||L({key:l,formControl:new n.FormGroup({}),form:i,parent:{}}),i=i.get([l])}e.autoClear&&!F(e.defaultValue)&&F(O(e))&&C(e,e.defaultValue);var u=O(e);x(t.value)&&x(u)||t.value===u||!(t instanceof n.FormControl)||t.patchValue(u,{emitEvent:!1});var f=s[s.length-1];e._hide||i.get([f])===t||$(i,{emitEvent:r},(function(){return i.setControl(f,t)}))}}function B(e){var t=e.status;e.updateValueAndValidity({emitEvent:!1}),t!==e.status&&e.statusChanges.emit(e.status)}function $(e,t,r){e instanceof n.FormGroup&&!e.__patchForEachChild&&(V(e,"__patchForEachChild",!0),e._forEachChild=function(t){Object.keys(e.controls).forEach((function(n){return e.controls[n]&&t(e.controls[n],n)}))});var o=e.updateValueAndValidity.bind(e);!1===t.emitEvent&&(e.updateValueAndValidity=function(e){o(u(u({},e||{}),{emitEvent:!1}))}),r(),!1===t.emitEvent&&(e.updateValueAndValidity=o)}var Z=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return l(r,e),r.prototype.onPopulate=function(e){!e.formControl&&e.key&&L(e,new n.FormArray([],{updateOn:e.modelOptions.updateOn})),e.fieldGroup=e.fieldGroup||[];var t=e.model?e.model.length:0;if(e.fieldGroup.length>t)for(var r=e.fieldGroup.length-1;r>=t;--r)q(e.fieldGroup[r]),e.fieldGroup.splice(r,1);for(r=e.fieldGroup.length;r<t;r++){var o=u(u({},w(e.fieldArray)),{key:""+r});e.fieldGroup.push(o)}},r.prototype.add=function(e,t,n){var r=(void 0===n?{markAsDirty:!0}:n).markAsDirty;e=null==e?this.field.fieldGroup.length:e,this.model||C(this.field,[]),this.model.splice(e,0,t?w(t):void 0),this._build(),r&&this.formControl.markAsDirty()},r.prototype.remove=function(e,t){var n=(void 0===t?{markAsDirty:!0}:t).markAsDirty;this.model.splice(e,1),q(this.field.fieldGroup[e],!0),this.field.fieldGroup.splice(e,1),this.field.fieldGroup.forEach((function(e,t){return e.key=""+t})),this._build(),n&&this.formControl.markAsDirty()},r.prototype._build=function(){this.options.build(this.field),this.options.fieldChanges.next({field:this.field,value:O(this.field),type:"valueChanges"})},r=p([t.Directive()],r)}(N),z=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),p([t.ViewChild("fieldComponent",{read:t.ViewContainerRef}),d("design:type",t.ViewContainerRef)],n.prototype,"fieldComponent",void 0),n=p([t.Directive()],n)}(N),J=function(e){function n(t){var n=e.call(this)||this;return n.sanitizer=t,n.innerHtml={content:null,template:null},n}return l(n,e),Object.defineProperty(n.prototype,"template",{get:function(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.to.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content},enumerable:!0,configurable:!0}),n.ctorParameters=function(){return[{type:s.DomSanitizer}]},n=p([t.Component({selector:"formly-template",template:'<div [innerHtml]="template"></div>',changeDetection:t.ChangeDetectionStrategy.OnPush}),d("design:paramtypes",[s.DomSanitizer])],n)}(N);function Y(e,t){try{return Function.apply(void 0,y(t,["return "+e+";"]))}catch(e){console.error(e)}}var K=function(){function e(){}return e.prototype.onPopulate=function(e){var t,n,o=this;if(!e._expressions){V(e,"_expressions",{}),e.expressionProperties=e.expressionProperties||{},A(e,["hide"],(function(t){var n=t.currentValue,r=t.firstChange;V(e,"_hide",!!n),(!r||r&&!0===n)&&(e.templateOptions.hidden=n,e.options._hiddenFieldsForCheck.push(e))})),e.hideExpression&&A(e,["hideExpression"],(function(t){var n=t.currentValue;e._expressions.hide=o.parseExpressions(e,"hide","boolean"==typeof n?function(){return n}:n)}));var i=function(t){A(e,["expressionProperties",t],(function(n){var i=n.currentValue;if("string"==typeof i||k(i))e._expressions[t]=o.parseExpressions(e,t,i);else if(i instanceof r.Observable){var s=function(){return i.subscribe((function(n){o.evalExpr(e,t,n)}))},a=s(),l=e.hooks.onInit;e.hooks.onInit=function(){return null===a&&(a=s()),l&&l(e)};var u=e.hooks.onDestroy;e.hooks.onDestroy=function(){u&&u(e),a.unsubscribe(),a=null}}}))};try{for(var s=h(Object.keys(e.expressionProperties)),a=s.next();!a.done;a=s.next()){i(a.value)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}},e.prototype.postPopulate=function(e){var t=this;e.parent||e.options.checkExpressions||(e.options.checkExpressions=function(n,r){void 0===r&&(r=!1),G(n.form,(function(){return t.checkExpressions(n,r)}));var o=e.options;o._hiddenFieldsForCheck.sort((function(e){return e.hide?-1:1})).forEach((function(e){return t.changeHideState(e,e.hide)})),o._hiddenFieldsForCheck=[]},e.options._checkField=function(t,n){console.warn("Formly: 'options._checkField' is deprecated since v6.0, use 'options.checkExpressions' instead."),e.options.checkExpressions(t,n)})},e.prototype.parseExpressions=function(e,t,n){var r,o,i=this;return e.parent&&["hide","templateOptions.disabled"].includes(t)&&(r=Y("!!field.parent."+t,["field"])),"string"==typeof(n=n||function(){return!1})&&(n=Y(n,["model","formState","field"])),function(s){var a,l,u,f=(a=r?function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return r(e)||n.apply(void 0,y(t))}:n,l={field:e},u=[e.model,e.options.formState,e],"function"==typeof a?a.apply(l,u):!!a);return!(!s&&(o===f||P(f)&&JSON.stringify(f)===JSON.stringify(o)))&&(o=f,i.evalExpr(e,t,f),!0)}},e.prototype.checkExpressions=function(e,t){var n,r,o=this;if(void 0===t&&(t=!1),e){if(e._expressions)try{for(var i=h(Object.keys(e._expressions)),s=i.next();!s.done;s=i.next()){var a=s.value;e._expressions[a](t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.fieldGroup&&e.fieldGroup.forEach((function(e){return o.checkExpressions(e,t)}))}},e.prototype.changeDisabledState=function(e,t){var n=this;e.fieldGroup&&e.fieldGroup.filter((function(e){return!e.expressionProperties||!e.expressionProperties.hasOwnProperty("templateOptions.disabled")})).forEach((function(e){return n.changeDisabledState(e,t)})),e.key&&e.templateOptions.disabled!==t&&(e.templateOptions.disabled=t)},e.prototype.changeHideState=function(e,t){var n=this;if(e.formControl&&e.key){V(e,"_hide",!(!t&&!e.hide));var r=e.formControl;r._fields.length>1&&B(r),!0===t&&r._fields.every((function(e){return!!e._hide}))?q(e):L(e)}e.fieldGroup&&e.fieldGroup.filter((function(e){return!e.hideExpression})).forEach((function(e){return n.changeHideState(e,t)})),e.options.fieldChanges&&e.options.fieldChanges.next({field:e,type:"hidden",value:t})},e.prototype.evalExpr=function(e,t,n){try{for(var r=e,o=t.split("."),i=o.length-1,s=0;s<i;s++)r=r[o[s]];r[o[i]]=n}catch(e){throw e.message='[Formly Error] [Expression "'+t+'"] '+e.message,e}if("templateOptions.disabled"===t&&e.key&&this.changeDisabledState(e,n),0===t.indexOf("model.")){var a=t.replace(/^model\./,""),l=e.key&&e.key===a?e.formControl:e.form.get(a);!l||x(l.value)&&x(n)||l.value===n||l.patchValue(n,{emitEvent:!1})}},e}(),Q=function(){function e(e){this.config=e}return e.prototype.onPopulate=function(e){this.initFieldValidation(e,"validators"),this.initFieldValidation(e,"asyncValidators")},e.prototype.initFieldValidation=function(e,t){var n,r,o=this,i=[];if("validators"!==t||e.hasOwnProperty("fieldGroup")&&!e.key||i.push(this.getPredefinedFieldValidation(e)),e[t])try{for(var s=h(Object.keys(e[t])),a=s.next();!a.done;a=s.next()){var l=a.value;"validation"===l?i.push.apply(i,y(e[t].validation.map((function(t){return o.wrapNgValidatorFn(e,t)})))):i.push(this.wrapNgValidatorFn(e,e[t][l],l))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}V(e,"_"+t,i)},e.prototype.getPredefinedFieldValidation=function(e){var t=[];return b.forEach((function(n){return A(e,["templateOptions",n],(function(r){var o=r.currentValue,i=r.firstChange;t=t.filter((function(e){return e!==n})),null!=o&&!1!==o&&t.push(n),!i&&e.formControl&&B(e.formControl)}))})),function(r){return 0===t.length?null:n.Validators.compose(t.map((function(t){return function(){var o=e.templateOptions[t];switch(t){case"required":return n.Validators.required(r);case"pattern":return n.Validators.pattern(o)(r);case"minLength":return n.Validators.minLength(o)(r);case"maxLength":return n.Validators.maxLength(o)(r);case"min":return n.Validators.min(o)(r);case"max":return n.Validators.max(o)(r)}}})))(r)}},e.prototype.wrapNgValidatorFn=function(e,t,n){var i=this,s=null;if("string"==typeof t&&(s=w(this.config.getValidator(t))),"object"==typeof t&&t.name&&(s=w(this.config.getValidator(t.name)),t.options&&(s.options=t.options)),"object"==typeof t&&t.expression){var a=t.expression,l=f(t,["expression"]);s={name:n,validation:a,options:Object.keys(l).length>0?l:null}}return"function"==typeof t&&(s={name:n,validation:t}),function(t){var a,l=s.validation(t,e,s.options);if(n){if((a=l)&&"function"==typeof a.then)return l.then((function(t){return i.handleAsyncResult(e,t,s)}));if(r.isObservable(l))return l.pipe(o.map((function(t){return i.handleAsyncResult(e,t,s)})));l=!!l}return i.handleResult(e,l,s)}},e.prototype.handleAsyncResult=function(e,t,n){return e.options.detectChanges(e),this.handleResult(e,!!t,n)},e.prototype.handleResult=function(e,t,n){var r,o,i=n.name,s=n.options;"boolean"==typeof t&&(t=t?null:((r={})[i]=s||!0,r));var a=e.formControl;if(a&&a._childrenErrors&&a._childrenErrors[i]&&a._childrenErrors[i](),a&&t&&t[i]){var l=t[i].errorPath?t[i].errorPath:(s||{}).errorPath,p=l?e.formControl.get(l):null;if(p){var c=t[i],d=(c.errorPath,f(c,["errorPath"]));p.setErrors(u(u({},p.errors||{}),((o={})[i]=d,o))),!a._childrenErrors&&V(a,"_childrenErrors",{}),a._childrenErrors[i]=function(){var e=p.errors||{},t=i,n=(e[t],f(e,["symbol"==typeof t?t:t+""]));p.setErrors(0===Object.keys(n).length?null:n)}}}return t},e}(),X=function(){function e(){}return e.prototype.prePopulate=function(e){this.root||(this.root=e),e.parent&&Object.defineProperty(e,"form",{get:function(){return e.parent.formControl},configurable:!0})},e.prototype.onPopulate=function(e){e.key&&this.addFormControl(e),e.form&&e.hasOwnProperty("fieldGroup")&&!e.key&&V(e,"formControl",e.form)},e.prototype.postPopulate=function(e){this.root===e&&(this.root=null,this.setValidators(e)&&e.form._updateTreeValidity())},e.prototype.addFormControl=function(e){var t=function(e){if(e.formControl)return e.formControl;var t=e.parent.formControl;return t?t.get(v(e)):null}(e);if(!t){var r={updateOn:e.modelOptions.updateOn};t=e.fieldGroup?new n.FormGroup({},r):new n.FormControl({value:O(e),disabled:!1},r)}L(e,t)},e.prototype.setValidators=function(e){var t=this,o=!1;if(e.key||!e.parent){var i=e.formControl;!!e.templateOptions&&e.templateOptions.disabled&&i.enabled&&(i.disable({emitEvent:!1,onlySelf:!0}),o=!0),null!==i.validator&&null!==i.asyncValidator||(i.setValidators((function(){var r=n.Validators.compose(t.mergeValidators(e,"_validators"));return r?r(i):null})),i.setAsyncValidators((function(){var o=n.Validators.composeAsync(t.mergeValidators(e,"_asyncValidators"));return o?o(i):r.of(null)})),i.parent?o=!0:B(i))}return(e.fieldGroup||[]).forEach((function(e){return e&&t.setValidators(e)&&(o=!0)})),o},e.prototype.mergeValidators=function(e,t){var n=this,r=[],o=e.formControl;return o&&o._fields&&o._fields.length>1?o._fields.filter((function(e){return!e._hide})).forEach((function(e){return r.push.apply(r,y(e[t]))})):r.push.apply(r,y(e[t])),e.fieldGroup&&e.fieldGroup.filter((function(e){return e&&!e.key&&e.fieldGroup})).forEach((function(e){return r.push.apply(r,y(n.mergeValidators(e,t)))})),r},e}(),ee=function(){function e(e){this.config=e,this.formId=0}return e.prototype.prePopulate=function(e){var t=e.parent;this.initRootOptions(e),t&&(Object.defineProperty(e,"options",{get:function(){return t.options},configurable:!0}),Object.defineProperty(e,"model",{get:function(){return e.key&&e.fieldGroup?O(e):t.model},configurable:!0})),this.getFieldComponentInstance(e).prePopulate()},e.prototype.onPopulate=function(e){var t=this;this.initFieldOptions(e),this.getFieldComponentInstance(e).onPopulate(),e.fieldGroup&&e.fieldGroup.forEach((function(n,r){n&&(Object.defineProperty(n,"parent",{get:function(){return e},configurable:!0}),Object.defineProperty(n,"index",{get:function(){return r},configurable:!0})),t.formId++}))},e.prototype.postPopulate=function(e){this.getFieldComponentInstance(e).postPopulate()},e.prototype.initRootOptions=function(e){if(!e.parent){var n=e.options;e.options.formState=e.options.formState||{},n.showError||(n.showError=this.config.extras.showError),n.fieldChanges||V(n,"fieldChanges",new r.Subject),n._hiddenFieldsForCheck||(n._hiddenFieldsForCheck=[]),n._markForCheck=function(e){console.warn("Formly: 'options._markForCheck' is deprecated since v6.0, use 'options.detectChanges' instead."),n.detectChanges(e)},n.detectChanges=function(e){e._componentRefs&&e._componentRefs.forEach((function(e){e.injector.get(t.ChangeDetectorRef).markForCheck()})),e.fieldGroup&&e.fieldGroup.forEach((function(e){return e&&n.detectChanges(e)}))},n.resetModel=function(t){t=w(null!=t?t:n._initialModel),e.model&&(Object.keys(e.model).forEach((function(t){return delete e.model[t]})),Object.assign(e.model,t||{})),n.build(e),e.form.reset(t),n.parentForm&&n.parentForm.control===e.formControl&&(n.parentForm.submitted=!1)},n.updateInitialValue=function(){return n._initialModel=w(e.model)},e.options.updateInitialValue()}},e.prototype.initFieldOptions=function(e){E(e,{id:g("formly_"+this.formId,e,e.index),hooks:{},modelOptions:{},templateOptions:e.type&&e.key?{label:"",placeholder:"",focus:!1,disabled:!1}:{}}),"formly-template"!==e.type&&(e.template||e.expressionProperties&&e.expressionProperties.template)&&(e.type="formly-template"),!e.type&&e.fieldGroup&&(e.type="formly-group"),e.type&&this.config.getMergedField(e),e.autoClear||F(e.defaultValue)||!F(O(e))||C(e,e.defaultValue),e.wrappers=e.wrappers||[]},e.prototype.getFieldComponentInstance=function(e){var t=this.config.resolveFieldTypeRef(e),n=t?t.instance:{};return{prePopulate:function(){return n.prePopulate&&n.prePopulate(e)},onPopulate:function(){return n.onPopulate&&n.onPopulate(e)},postPopulate:function(){return n.postPopulate&&n.postPopulate(e)}}},e}();function te(e){return{types:[{name:"formly-group",component:U},{name:"formly-template",component:J}],extensions:[{name:"core",extension:new ee(e)},{name:"field-validation",extension:new Q(e)},{name:"field-form",extension:new X},{name:"field-expression",extension:new K}]}}var ne=function(){function e(e,t){void 0===t&&(t=[]),t&&t.forEach((function(t){return e.addConfig(t)}))}var n;return n=e,e.forRoot=function(e){return void 0===e&&(e={}),{ngModule:n,providers:[{provide:D,multi:!0,useFactory:te,deps:[I]},{provide:D,useValue:e,multi:!0},I,S]}},e.forChild=function(e){return void 0===e&&(e={}),{ngModule:n,providers:[{provide:D,useValue:e,multi:!0},S]}},e.ctorParameters=function(){return[{type:I},{type:Array,decorators:[{type:t.Optional},{type:t.Inject,args:[D]}]}]},e=n=p([t.NgModule({declarations:[T,M,H,U,W,J],exports:[T,M,H,U,W],imports:[i.CommonModule]}),c(1,t.Optional()),c(1,t.Inject(D)),d("design:paramtypes",[I,Array])],e)}();e.FORMLY_CONFIG=D,e.FieldArrayType=Z,e.FieldType=N,e.FieldWrapper=z,e.FormlyConfig=I,e.FormlyField=M,e.FormlyForm=T,e.FormlyFormBuilder=S,e.FormlyModule=ne,e.ɵFormlyAttributes=H,e.ɵFormlyGroup=U,e.ɵFormlyValidationMessage=W,e.ɵa=te,e.ɵb=J,e.ɵc=ee,e.ɵd=Q,e.ɵdefineHiddenProp=V,e.ɵe=X,e.ɵf=K,e.ɵgetFieldInitialValue=function(e){for(var t,n,r=e.options._initialModel,o=v(e);e.parent;)o=y(v(e=e.parent),o);try{for(var i=h(o),s=i.next();!s.done;s=i.next()){var a=s.value;if(!r)return;r=r[a]}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.ɵobserve=A,e.ɵreverseDeepMerge=E,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-formly-core.umd.min.js.map